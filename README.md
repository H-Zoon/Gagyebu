# ğŸ’° Gagyebu, ê°€ê³„ë¶€
> ë‚˜ì˜ ì¬ì • ìƒíƒœë¥¼ ë³´ê¸° ì‰¬ìš´ uië¡œ ì „ì²´ì ì¸ í†µê³„ë¥¼ ë‚´ë¦´ ìˆ˜ ìˆëŠ” ì•± ì…ë‹ˆë‹¤.

## í”„ë¡œì íŠ¸ ê¸°ê°„
> November 16, 2022 ~ December 20, 2022

## ì œì‘ ë™ê¸°
> 2022ë…„ ICT ì¸í„´ì‹­ì¤‘ ì§„í–‰í•œ í”„ë¡œì íŠ¸ ì…ë‹ˆë‹¤.
> ...
> 
<br/>

## ğŸ§â€â™€ï¸ í”„ë¡œì íŠ¸ ì°¸ì—¬ì

|[![](https://github.com/H-Zoon.png?size=100)](https://github.com/H-Zoon) |[![](https://github.com/eunjjungg.png?size=100)](https://github.com/eunjjungg) |
|:---:|:---:|
| **HyunJoon Choi** | **EunJung Jung** | 

<br/><br/>

## ğŸ“Œ [@HyunJoon Choi](https://github.com/H-Zoon) : ì‚¬ìš© ê¸°ìˆ 

- Android Studio, Kotlin
- MVVM
- Live Data, Data Binding
- Android Jetpack (Compose UI, Android KTX)
- Custom View
- Room
- í˜‘ì—… - Jira, Gitflow, Bitbucket, Confluence, Figma

<br/><br/>

## ğŸ’»Â [@HyunJoon Choi](https://github.com/H-Zoon) : Native ë‹´ë‹¹ ë¶€ë¶„

- í”„ë¡œì íŠ¸ ì„¸íŒ…
- ë©”ì¸ í™”ë©´ ë ˆì´ì•„ì›ƒ êµ¬ì„±
- ì‚¬ìš©ìì˜ ë°ì´í„° ë³€í™”ì— ëŒ€í•œ ë°˜ì‘í˜• ë¡œì§ êµ¬í˜„
- ì‚¬ìš©ìê°€ ì¶”ê°€í•œ ë°ì´í„° í•„í„°ë§ ë¡œì§ êµ¬í˜„ (ë‚ ì§œë³„, ì†Œë¹„ìœ í˜•)
- ë°ì´í„° êµ¬ì¡°
<br/><br/>

## MainActivity **Layout structure**

<img width="892" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-05-01 á„‹á…©á„’á…® 8 59 12" src="[https://user-images.githubusercontent.com/43941511/235448800-3ec39cd9-2429-4343-a24f-62cb1c2c8f6d.png](https://user-images.githubusercontent.com/43941511/235448800-3ec39cd9-2429-4343-a24f-62cb1c2c8f6d.png)">

## MainActivity DataFlow

<img width="971" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-05-01 á„‹á…©á„’á…® 8 45 48" src="[https://user-images.githubusercontent.com/43941511/235447449-28af1a80-d7e1-44b0-a784-0b6452ab93e0.png](https://user-images.githubusercontent.com/43941511/235447449-28af1a80-d7e1-44b0-a784-0b6452ab93e0.png)">

# Application Function 1 - DataControl

[https://user-images.githubusercontent.com/43941511/235449716-33b6668b-29e2-42cc-8265-1ec04f7c38c6.mp4](https://user-images.githubusercontent.com/43941511/235449716-33b6668b-29e2-42cc-8265-1ec04f7c38c6.mp4)

- ë°ì´í„°ê°€ í¬í•¨ëœ ë‚ ì§œ, í•„í„°ë§, ì´ì•¡, ìˆ˜ì…ê³¼ ì§€ì¶œê¸ˆì•¡, ì†Œë¹„ ì„¸ë¶€ì •ë³´ë¥¼ ë³¼ ìˆ˜ ìˆëŠ” ë©”ì¸ í™”ë©´
- ìƒì„¸ ë°ì´í„°ë¥¼ ì™¼ìª½ìœ¼ë¡œ ìŠ¤ì™€ì´í”„ í•˜ì—¬ ë°ì´í„° ì‚­ì œê¸°ëŠ¥ êµ¬í˜„
- ë°ì´í„°ë¥¼ ì‚­ì œí•œ í›„ ìŠ¤ë„¥ë°”ë¥¼ í†µí•´ ì‚­ì œ ì™„ë£Œë¥¼ ë…¸ì¶œí•˜ê³  3ì´ˆ ì´ë‚´ ë°ì´í„° ë³µêµ¬ ê¸°ëŠ¥ êµ¬í˜„
- ìƒì„¸ ë°ì´í„°ë¥¼ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ìŠ¤ì™€ì´í”„ í•˜ì—¬ ë°ì´í„° ìˆ˜ì •ê¸°ëŠ¥ êµ¬í˜„
- ì‚¬ìš©ìì˜ ì´ë²¤íŠ¸ë¥¼ ë°›ì•„ ì‹¤ì‹œê°„ìœ¼ë¡œ ë©”ì¸ í™”ë©´ì˜ ê° ìš”ì†Œë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„

## User Item save - Room Database

- ì‚¬ìš©ìì˜ ê°€ê³„ë¶€ í•­ëª© (ìˆ˜ì…/ì§€ì¶œì—¬ë¶€, ì œëª©, ê¸ˆì•¡, ì¹´í…Œê³ ë¦¬) ì€ Android Room Databaseë¥¼ í†µí•´ ì €ì¥.
- ê° í•­ëª©ì˜ í•„ìš”í•œ ì¿¼ë¦¬ëŠ” Repositoryì—ì„œ ëª…ì„¸í•˜ì—¬ ì‚¬ìš©.

### Repository Example

```

    //í•„í„°ë§ ì—†ìŒ + ê¸ˆì•¡, ì¼ì ì‚¬ìš©ì ì…ë ¥ì— ë”°ë¼ ì •ë ¬
    @Query("SELECT * FROM ItemEntity WHERE year= :year AND month = :month ORDER BY "+
            "CASE :order WHEN 'day' THEN day END DESC," +
            "CASE :order WHEN 'amount' THEN amount END DESC")
    fun sortDay(year: Int, month: Int, order: String) : Flow<List<ItemEntity>>

    //ìˆ˜ì… í•„í„°ë§ + ì›”/ê¸ˆì•¡ì •ë ¬
    @Query("SELECT * FROM ItemEntity WHERE category = 'ìˆ˜ì…' AND year= :year AND month = :month ORDER BY "+
            "CASE :order WHEN 'day' THEN day END DESC," +
            "CASE :order WHEN 'amount' THEN amount END DESC")
    fun sortInIncome(year: Int, month: Int, order: String) : Flow<List<ItemEntity>>

    //ì§€ì¶œ í•„í„°ë§ + ì›”/ê¸ˆì•¡ì •ë ¬
    @Query("SELECT * FROM ItemEntity WHERE NOT category = 'ìˆ˜ì…' AND year= :year AND month = :month ORDER BY "+
            "CASE :order WHEN 'day' THEN day END DESC," +
            "CASE :order WHEN 'amount' THEN amount END DESC")
    fun sortInSpend(year: Int, month: Int, order: String) : Flow<List<ItemEntity>>

```

- ì‚¬ìš©ì ë°ì´í„°ëŠ” FlowDataë¡œ ë°˜í™˜ë°›ê³  DomainLayerì—ì„œ ìˆ˜ì§‘. LiveDataë¡œ ë³€í™˜í•˜ë„ë¡ êµ¬í˜„

```

    //ì‚¬ìš©ì item
    val itemFlow: LiveData<List<ItemEntity>> = itemGetOption.flatMapLatest {
        itemRepository.itemGet(it)
    }.asLiveData()

```

## Compose (MainUI)

- ë„ë©”ì¸ ë ˆì´ì•„ì›ƒì˜ ë°ì´í„° ë³€í™”ë¥¼ ê°ì§€í•˜ì—¬ Composeì˜ LazyColumn ê°’ì„ ì´ˆê¸°í™” í•˜ë„ë¡ êµ¬í˜„

```

val itemValue by MainViewModel.itemFlow.observeAsState()

...

 itemValue?.let { it ->
                ItemList(it, listState = listState,
                    DismissDelete = {
                        ItemRepo.deleteItem(it.id)
                    },
                    DismissUpdate =
                        val updateData = UpdateDate(
                            id = it.id,
                            date = "${it.year}-${it.month}-${it.day}",
                            title = it.title,
                            amount = it.amount,
                            category = it.category
                        )

```

# Application Function 2 - item filtering

[https://user-images.githubusercontent.com/43941511/235449805-a4460b9a-d0f6-4994-a848-2061be3bb1cb.mp4](https://user-images.githubusercontent.com/43941511/235449805-a4460b9a-d0f6-4994-a848-2061be3bb1cb.mp4)

- ì‚¬ìš©ìì˜ ê°€ê³„ë‚´ì—­ (ì „ì²´, ìˆ˜ì…, ì§€ì¶œ)ê³¼ ì •ë ¬ë°©ì‹(ê¸ˆì•¡, ë‚ ì§œ)ì„ ì…ë ¥ë°›ì•„ í•´ë‹¹ ë‚´ìš©ìœ¼ë¡œ í•„í„°ë§ í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„
- í•´ë‹¹ ë°ì´í„°ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì¢…ë£Œë˜ê³  ë‹¤ì‹œ ì‹¤í–‰ë˜ì–´ë„ ì €ì¥ë  ìˆ˜ ìˆë„ë¡ Android DataStoreë¥¼ ì´ìš©í•˜ì—¬ êµ¬í˜„

## **Save filtering information -** DataStore

```yaml
private val Context.dataStore by preferencesDataStore(name = "option_state")

class OptionState(private val context: Context) {

    private val year = intPreferencesKey("year") // ë…„ë„ ì €ì¥
    private val month = intPreferencesKey("month") // ë‹¬ ì €ì¥
    private val filter = stringPreferencesKey("filter") // í•„í„°ê°’ ì €ì¥
    private val order = stringPreferencesKey("order") // ì •ë ¬ê°’ ì €ì¥

    val yearFlow : Flow<Int> = context.dataStore.data
        .map { Preferences ->  Preferences[year] ?: YEAR}

    val monthFlow : Flow<Int> = context.dataStore.data
        .map { Preferences ->  Preferences[month] ?: MONTH}

    val filterFlow : Flow<String> = context.dataStore.data
        .map { Preferences ->  Preferences[filter] ?: SelectableOptionsEnum.DEFAULT.toString()}

    val orderFlow : Flow<String> = context.dataStore.data
        .map { Preferences ->  Preferences[order] ?: SelectableOptionsEnum.day.toString()}

    suspend fun setYear(value : Int){
        context.dataStore.edit {
                Preferences -> Preferences[year] = value
        }
    }

    suspend fun setMonth(value : Int){
        context.dataStore.edit {
                Preferences -> Preferences[month] = value
        }
    }

    suspend fun setFilter(value : String){
        context.dataStore.edit {
                Preferences -> Preferences[filter] = value
        }
    }

    suspend fun setOrder(value : String){
        context.dataStore.edit {
                Preferences -> Preferences[order] = value
        }
    }
}
```

## show filtering statement

í•„í„°ë§ ì ìš© ìƒíƒœì¼ë•Œ ì•„ì´ì½˜ ìƒ‰ìƒ ë³€í™”ë¥¼ ì£¼ì–´ ì§ê´€ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ ì¶”ê°€

```yaml
//í•„í„°ë§ ìƒíƒœì— ë”°ë¼ icon ìƒ‰ìƒ ë³€ê²½
        viewModel.filterState.observe(this) {
            when (it) {
                true -> binding.filter.imageTintList =
                    ColorStateList.valueOf(android.graphics.Color.parseColor("#E74141"))

                false -> binding.filter.imageTintList =
                    ColorStateList.valueOf(android.graphics.Color.parseColor("#6D6D6D"))
            }
        }
```

## ProduceActivity **Layout structure**

## ProduceActivity DataFlow

## Application Function 3 - item input

ë‚ ì§œ, ì œëª©, ê¸ˆì•¡, ì†Œë¹„/ì§€ì¶œ ì—¬ë¶€ë¥¼ ì…ë ¥ë°›ì•„ ì €ì¥

ê³ ë ¤ì‚¬í•­

- ë°ì´í„°ê°€ ì˜¬ë°”ë¥¸ ë°ì´í„°ì¸ì§€
- ì €ì¥ì´ ì„±ê³µ/ì‹¤íŒ¨í–ˆëŠ”ì§€
- ì‚¬ìš©ìê°€ ëª¨ë“  ë°ì´í„°ë¥¼ ì…ë ¥í–ˆëŠ”ì§€ (ë²„íŠ¼ì„ í™œì„±í™” í•´ë„ ê´œì°®ì€ì§€)
